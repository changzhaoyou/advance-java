# 访问者模式(操作复杂对象结构)


---

##访问者模式简述
 - 访问者模式是一种较为复杂的行为型设计模式，它包含访问者和被访问元素两个主要组成部分，这些被访问的元素通常具有不同的类型，且不同的访问者可以对它们进行不同的访问操作。例如处方单中的各种药品信息就是被访问的元素，而划价人员和药房工作人员就是访问者。访问者模式使得用户可以在不修改现有系统的情况下扩展系统的功能，为这些不同类型的元素增加新的操作。
 - 访问者模式(Visitor Pattern):提供一个作用于某对象结构中的各元素的操作表示，它使我们可以在不改变各元素的类的前提下定义作用于这些元素的新操作。访问者模式是一种对象行为型模式。

##访问者模式类图
![image_1dh6dhrf71nn7bue6un1jc81jk59.png-366.9kB][1]

 - Vistor（抽象访问者）：抽象访问者为对象结构中每一个具体元素类ConcreteElement声明一
个访问操作，从这个操作的名称或参数类型可以清楚知道需要访问的具体元素的类型，具体
访问者需要实现这些操作方法，定义对这些元素的访问操作。
 - ConcreteVisitor（具体访问者）：具体访问者实现了每个由抽象访问者声明的操作，每一个操
作用于访问对象结构中一种类型的元素。
 - Element（抽象元素）：抽象元素一般是抽象类或者接口，它定义一个accept()方法，该方法
通常以一个抽象访问者作为参数。【稍后将介绍为什么要这样设计。】
 - ConcreteElement（具体元素）：具体元素实现了accept()方法，在accept()方法中调用访问者
的访问方法以便完成对一个元素的操作。
 -  ObjectStructure（对象结构）：对象结构是一个元素的集合，它用于存放元素对象，并且提
供了遍历其内部元素的方法。它可以结合组合模式来实现，也可以是一个简单的集合对象，
如一个List对象或一个Set对象。

  [1]: http://static.zybuluo.com/yzz19881016/9v9bilmuk794sbuf61zxt1be/image_1dh6dhrf71nn7bue6un1jc81jk59.png